<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>4ì§€ì„ ë‹¤í˜• ë¬¸ì œ í’€ì´</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 600px; margin: auto; padding: 20px; }
    .question-box { margin-bottom: 20px; }
    .option { margin: 5px 0; }
    .result { margin-top: 20px; font-weight: bold; }
    .navigation { margin-top: 20px; display: flex; justify-content: space-between; }
    .summary { margin-top: 30px; }
  </style>
</head>
<body>
  <h2 id="question-number"></h2>
  <div class="question-box">
    <p id="question-text"></p>
    <div id="options"></div>
  </div>
  <button onclick="submitAnswer()">ì œì¶œ</button>
  <div class="result" id="result"></div>
  <div class="navigation">
    <button onclick="prevQuestion()">ì´ì „</button>
    <button onclick="nextQuestion()">ë‹¤ìŒ</button>
  </div>
  <div class="summary" id="summary"></div>

  <script>
    let questions = [];
    let current = 0;
    let score = 0;
    let incorrect = [];
    let userAnswers = [];

    async function loadQuestions() {
      const res = await fetch('questions.json');
      questions = await res.json();
      showQuestion();
    }

    function showQuestion() {
      const q = questions[current];
      document.getElementById('question-number').innerText = `ë¬¸ì œ ${current + 1} / ${questions.length}`;
      document.getElementById('question-text').innerText = q.question;
      document.getElementById('result').innerText = '';

      const options = q.options.map((opt, i) => `
        <label class="option">
          <input type="radio" name="answer" value="${i}" /> ${opt}
        </label>
      `).join('');
      document.getElementById('options').innerHTML = options;
    }

    function submitAnswer() {
      const selected = document.querySelector('input[name="answer"]:checked');
      if (!selected) return alert('ë‹µì•ˆì„ ì„ íƒí•´ì£¼ì„¸ìš”.');

      const answer = parseInt(selected.value);
      const q = questions[current];

      if (userAnswers[current] === undefined) {
        userAnswers[current] = answer;
        if (answer === q.answer) {
          score++;
        } else {
          incorrect.push({ index: current, question: q.question, your: q.options[answer], correct: q.options[q.answer], explanation: q.explanation });
        }
      }

      document.getElementById('result').innerText = answer === q.answer ? 'âœ… ì •ë‹µì…ë‹ˆë‹¤!' : `âŒ ì˜¤ë‹µì…ë‹ˆë‹¤. ì •ë‹µ: ${q.options[q.answer]}\ní•´ì„¤: ${q.explanation}`;
    }

    function nextQuestion() {
      if (current < questions.length - 1) {
        current++;
        showQuestion();
      } else {
        showSummary();
      }
    }

    function prevQuestion() {
      if (current > 0) {
        current--;
        showQuestion();
      }
    }

    function showSummary() {
      let html = `<h3>ğŸ‰ í€´ì¦ˆ ì™„ë£Œ!</h3><p>ì´ ${questions.length}ë¬¸ì œ ì¤‘ ${score}ê°œ ë§ì¶¤</p>`;
      if (incorrect.length > 0) {
        html += '<h4>í‹€ë¦° ë¬¸ì œ ëª¨ì•„ë³´ê¸°</h4><ul>';
        incorrect.forEach(item => {
          html += `<li><strong>${item.question}</strong><br/>ë„ˆì˜ ë‹µ: ${item.your}<br/>ì •ë‹µ: ${item.correct}<br/>í•´ì„¤: ${item.explanation}</li><br/>`;
        });
        html += '</ul>';
      } else {
        html += '<p>ëª¨ë“  ë¬¸ì œë¥¼ ë§ì·„ìŠµë‹ˆë‹¤! ğŸ¯</p>';
      }
      document.getElementById('summary').innerHTML = html;
    }

    loadQuestions();
  </script>
</body>
</html>
